const translations = {
    pt: {
        // Navigation
        nav_home: "Início",
        nav_profile: "Perfil",
        nav_skills: "Competências",
        nav_tools: "Ferramentas",
        nav_certs: "Certificações",
        btn_lang: "EN",
        
        // Homepage / Hero
        hero_title: "André Graça",
        hero_role: "Engenheiro de Cibersegurança",
        hero_sub: "Defesa | Ataque | Automação | Engenharia",
        
        // Categories (Keep existing)
        cat_secops_title: "Operações de Segurança (SecOps)",
        cat_secops_desc: "Especialista em deteção de ameaças e resposta a incidentes. Redução do MTTR e otimização de SIEM/XDR.",
        cat_eng_title: "Engenharia e Automação",
        cat_eng_desc: "Desenvolvimento de Playbooks SOAR e scripts Python. Integração de API (Gitlab, Jira).",
        cat_vuln_title: "Gestão de Vulnerabilidades",
        cat_vuln_desc: "Liderança de programas proativos com Tenable.io e Landsweeper. Remediação de +500 vulnerabilidades.",
        cat_net_title: "Segurança de Rede",
        cat_net_desc: "Defesa de infraestrutura com Darktrace e Palo Alto. Monitorização de tráfego (NDR).",
        cat_grc_title: "GRC e Conformidade",
        cat_grc_desc: "Adesão a frameworks NIST, ISO27001 e GDPR. Relatórios de auditoria técnica.",
        cat_cloud_title: "Segurança Cloud e Endpoint",
        cat_cloud_desc: "Políticas de segurança no Microsoft Defender e Intune. Proteção de ambientes híbridos.",

        // --- PROFILE PAGE STORY (NEW) ---
        bio_title: "Sobre Mim",
        bio_subtitle: "Uma jornada de resiliência: Do chão de fábrica à Engenharia de Cibersegurança.",
        
        // Section 1: Origins
        story_start_title: "O Início & A Paixão",
        story_start_text: "A minha jornada começou na Escola José Saramago em Mafra, no curso profissional de Técnico de Gestão e Programação de Sistemas Informáticos. Foi aqui que descobri a minha paixão pela tecnologia.",
        
        // Section 2: The Struggle
        story_struggle_title: "Resiliência na Crise (2011-2012)",
        story_struggle_text: "Com a crise financeira de 2011 em Portugal, fui forçado a interromper os estudos. Trabalhei em várias áreas, inclusive fiz um curso de CNC no IEFP. O ponto de viragem aconteceu numa fábrica de queijo: após quase perder a vida três vezes numa semana e ver o tratamento precário dos trabalhadores, decidi que aquela vida não era para mim. Juntei cada Euro que tinha e voltei a estudar.",
        
        // Section 3: The Return
        story_return_title: "O Regresso à Engenharia",
        story_return_text: "Completei o CET na Universidade Lusófona e segui para a Licenciatura em Engenharia Informática (2019). No meu projeto final, desenvolvi o 'Gaming Out of Depression' (proposto por uma psicóloga): um sistema completo (backend/frontend) estilo Discord com chat de voz e vídeo em tempo real para ajudar pessoas a socializar.",
        
        // Section 4: Current Era
        story_current_title: "A Evolução para Cibersegurança",
        story_current_text: "Durante a minha pós-graduação em Virtualização e Cloud no ISTEC, entrei na Noesis. Comecei com OutSystems, mas aceitei o desafio de migrar para a Cibersegurança. Com muita formação e prática, tornei-me no profissional sólido que sou hoje — sempre à frente da curva em ameaças e tecnologia.",

        // Education List
        edu_title: "Formação Académica",
        edu_1: "Pós-Graduação: Computação na Nuvem e Virtualização (ISTEC)",
        edu_2: "Licenciatura: Engenharia Informática (Universidade Lusófona)",
        edu_3: "CET: Tecnologia e Programação de Sistemas de Informação",

        // Footer
        footer_contact: "Entre em contacto via Email."
    },
    en: {
        // Navigation
        nav_home: "Home",
        nav_profile: "Profile",
        nav_skills: "Skills",
        nav_tools: "Tools",
        nav_certs: "Certs",
        btn_lang: "PT",
        
        // Homepage / Hero
        hero_title: "André Graça",
        hero_role: "Cybersecurity Engineer",
        hero_sub: "Defense | Offense | Automation | Engineering",

        // Categories (Keep existing)
        cat_secops_title: "Security Operations (SecOps)",
        cat_secops_desc: "Specialist in threat detection and incident response. Reduced MTTR and optimized SIEM/XDR.",
        cat_eng_title: "Engineering & Automation",
        cat_eng_desc: "Development of SOAR Playbooks and Python scripts. API integration (Gitlab, Jira).",
        cat_vuln_title: "Vulnerability Management",
        cat_vuln_desc: "Leading proactive programs using Tenable.io and Landsweeper. Remediation of 500+ vulnerabilities.",
        cat_net_title: "Network Security",
        cat_net_desc: "Infrastructure defense with Darktrace and Palo Alto. Traffic monitoring (NDR).",
        cat_grc_title: "GRC & Compliance",
        cat_grc_desc: "Adherence to NIST, ISO27001, and GDPR frameworks. Technical audit reports.",
        cat_cloud_title: "Cloud & Endpoint Security",
        cat_cloud_desc: "Security policies in Microsoft Defender and Intune. Securing hybrid environments.",

        // --- PROFILE PAGE STORY (NEW) ---
        bio_title: "About Me",
        bio_subtitle: "A journey of resilience: From the factory floor to Cybersecurity Engineering.",

        // Section 1: Origins
        story_start_title: " The Beginning & The Spark",
        story_start_text: "My journey started at Escola José Saramago in Mafra, taking a professional course in IT Systems Management & Programming. This is where I found my true passion for technology.",

        // Section 2: The Struggle
        story_struggle_title: "Resilience in Crisis (2011-2012)",
        story_struggle_text: "Due to the 2011 financial crisis in Portugal, I was forced to pause my studies. I worked blue-collar jobs and took a CNC course. The turning point was at a cheese factory: after nearly losing my life three times in a week and witnessing the poor treatment of workers, I decided that life wasn't for me. I saved every single Euro I had and went back to college.",

        // Section 3: The Return
        story_return_title: "Return to Engineering",
        story_return_text: "I completed my CET at Lusófona University followed by a BSc in Computer Engineering (2019). For my final project, I built 'Gaming Out of Depression' (proposed by a psychologist): a full-stack real-time voice/video chat system (Discord-style) designed to help people socialize.",

        // Section 4: Current Era
        story_current_title: "The Pivot to Cybersecurity",
        story_current_text: "During my Post-Grad in Virtualization & Cloud at ISTEC, I joined Noesis. I started with OutSystems but accepted a challenge to pivot to Cybersecurity. Through rigorous training and hands-on experience, I molded myself into the solid professional I am today—always staying ahead of the curve.",

        // Education List
        edu_title: "Education",
        edu_1: "Post-Grad: Cloud Computing & Virtualization (ISTEC)",
        edu_2: "BSc: Computer Engineering (Universidade Lusófona)",
        edu_3: "CET: Information Systems Technology & Programming",

        // Footer
        footer_contact: "Get in touch via Email."
    }
};

function changeLanguage(lang) {
    localStorage.setItem('lang', lang);
    document.documentElement.lang = lang;
    
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
            element.textContent = translations[lang][key];
        }
    });
}

/* --- ANIMATION LOGIC --- */

// 1. Scroll Observer (Triggers when items appear on screen)
const observerOptions = {
    threshold: 0.15, // Trigger when 15% of the item is visible
    rootMargin: "0px 0px -50px 0px" // Trigger slightly before bottom
};

const scrollObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            entry.target.classList.add('active');
            // Optional: Stop observing once active (remove line below to replay on scroll up)
            scrollObserver.unobserve(entry.target); 
        }
    });
}, observerOptions);

// Initialize Observer on Load
document.addEventListener('DOMContentLoaded', () => {
    const hiddenElements = document.querySelectorAll('.reveal-entry');
    hiddenElements.forEach((el) => scrollObserver.observe(el));
});



document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('lang') || 'en';
    changeLanguage(savedLang);
    
    const btn = document.getElementById('lang-toggle');
    if(btn) {
        btn.addEventListener('click', () => {
            const currentLang = localStorage.getItem('lang') || 'en';
            const newLang = currentLang === 'en' ? 'pt' : 'en';
            changeLanguage(newLang);
        });
    }
});

